<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resumo da Inscri√ß√£o</title>
<link rel="stylesheet" href="style.css">
<style>
.container {
    max-width: 500px;
    margin: 50px auto;
    padding: 20px;
    text-align: center;
    border: 2px solid #ff4d4d;
    border-radius: 10px;
    background-color: #1f1c2c;
    color: #fff;
}

.container h2 {
    margin-bottom: 20px;
}

.container button {
    padding: 10px 20px;
    font-size: 1.2em;
    background-color: #ff4d4d;
    border: none;
    border-radius: 8px;
    color: #fff;
    cursor: pointer;
    margin-top: 15px;
    transition: 0.3s;
}

.container button:hover {
    background-color: #ff1a1a;
    transform: scale(1.05);
}

.progress-bar {
    width: 100%;
    background-color: #444;
    border-radius: 10px;
    overflow: hidden;
    height: 20px;
    margin-bottom: 20px;
}

.progress-bar .progress {
    height: 100%;
    width: 100%;
    background-color: #ff4d4d;
    transition: width 0.5s ease-in-out;
}

#summary {
    text-align: left;
    margin-top: 20px;
}
</style>
</head>
<body>

<div class="container">
    <h2>Resumo da Inscri√ß√£o</h2>

    <div class="progress-bar">
        <div class="progress"></div>
    </div>

    <div id="summary"></div>

    <button id="finishBtn">Finalizar</button>
</div>

<script src="script.js"></script>
<script>
updateProgress(100);

function displaySummary() {
    const summaryDiv = document.getElementById('summary');

    const mode = loadData('mode');
    const squadName = loadData('squadName');
    const squadTag = loadData('squadTag');
    const nicknames = loadData('nicknames') || [];
    const country = loadData('country');
    const message = loadData('confirmationMsg') || '';

    summaryDiv.innerHTML = `
        <p><strong>Modalidade:</strong> ${mode}</p>
        <p><strong>Nome da Squad:</strong> ${squadName}</p>
        <p><strong>Tag da Squad:</strong> ${squadTag}</p>
        <p><strong>Nicknames:</strong> ${nicknames.join(', ')}</p>
        <p><strong>Pa√≠s:</strong> ${country}</p>
        <p><strong>Mensagem:</strong> ${message}</p>
    `;
}

// Mostra resumo ao carregar
displaySummary();

// Discord webhook
const webhookUrl = "https://discord.com/api/webhooks/1419024179809751161/-6fpwnlG5GfYmVikmqmZT5f18nb8-9I4nSdeTjWrhxL8XVoLnfQsU7Bb1B4yiaLCjEnx";

// N√∫mero do WhatsApp (com c√≥digo do pa√≠s, sem +)
const waNumber = "258874600005";

document.getElementById('finishBtn').addEventListener('click', () => {
    const mode = loadData('mode');
    const squadName = loadData('squadName');
    const squadTag = loadData('squadTag');
    const nicknames = loadData('nicknames') || [];
    const country = loadData('country');
    const message = loadData('confirmationMsg') || '';

    // Mensagem resumida
    let summaryText = `üìå **Inscri√ß√£o Free Fire Conclu√≠da**\n`;
    summaryText += `Modalidade: ${mode}\n`;
    summaryText += `Squad: ${squadName} [${squadTag}]\n`;
    summaryText += `Nicknames: ${nicknames.join(', ')}\n`;
    summaryText += `Pa√≠s: ${country}\n`;
    if(message) summaryText += `Mensagem: ${message}`;

    // Envia para Discord
    fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: summaryText })
    })
    .then(res => {
        if(res.ok){
            // Redireciona para WhatsApp com mensagem pronta
            let whatsappMessage = `Nova inscri√ß√£o Free Fire:\nModalidade: ${mode}\nSquad: ${squadName} [${squadTag}]\nNicknames: ${nicknames.join(', ')}\nPa√≠s: ${country}\nMensagem: ${message}`;
            const encodedMessage = encodeURIComponent(whatsappMessage);
            clearData();
            window.location.href = `https://wa.me/${waNumber}?text=${encodedMessage}`;
        } else {
            alert("Erro ao enviar inscri√ß√£o para Discord.");
        }
    })
    .catch(err => alert("Erro: " + err));
});
</script>
</body>
</html>
